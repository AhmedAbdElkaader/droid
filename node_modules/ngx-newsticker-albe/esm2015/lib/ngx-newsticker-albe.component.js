/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, ElementRef, Renderer2, QueryList, ViewChild, ViewChildren, HostListener } from '@angular/core';
export class NgxNewstickerAlbeComponent {
    /**
     * @param {?} elementRef
     * @param {?} renderer
     */
    constructor(elementRef, renderer) {
        this.elementRef = elementRef;
        this.renderer = renderer;
        // Highlighted text.
        this.title = '';
        // List of messages to be displayed.
        this.events = [];
        // Set the time interval between the text exchange.
        this.interval = 3000;
        // Sets the current count visibility.
        this.showCounter = true;
        this.ACTIONS = {
            'NEXT': 1,
            'PREV': -1
        };
        this.position = -1;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.autoNavigate();
        this.navigate('NEXT'); // initialize
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        this.defaultColor = this.defaultColor || '#1976D2';
        // this.elementRef.nativeElement.style.backgroundColor = this.backgroundColor;
        this.renderer.setStyle(this.ntRef.nativeElement, 'background-color', this.backColor || '#FFFFFF');
        this.renderer.setStyle(this.ntRef.nativeElement, 'border-color', this.defaultColor);
        if (this.ntCounterRef) {
            this.renderer.setStyle(this.ntCounterRef.nativeElement, 'background-color', this.defaultColor);
        }
        if (this.ntTitleRef) {
            this.renderer.setStyle(this.ntTitleRef.nativeElement, 'background-color', this.defaultColor);
            this.renderer.setStyle(this.nDart.nativeElement, 'border-left-color', this.defaultColor);
        }
        this.ntNaviRef.forEach((/**
         * @param {?} item
         * @return {?}
         */
        item => {
            this.renderer.setStyle(item.nativeElement, 'border-color', this.defaultColor);
        }));
    }
    /**
     * @return {?}
     */
    onMouseOver() {
        clearInterval(this.autoNext);
    }
    /**
     * @return {?}
     */
    onMouseLeave() {
        this.autoNavigate();
    }
    /**
     * @private
     * @return {?}
     */
    autoNavigate() {
        if (this.interval > 0) {
            this.autoNext = setInterval((/**
             * @return {?}
             */
            () => this.navigate('NEXT')), this.interval);
        }
        else {
            clearInterval(this.autoNext);
        }
    }
    /**
     * @param {?} action
     * @return {?}
     */
    navigate(action) {
        if (typeof this.ACTIONS[action] === 'undefined') {
            return;
        }
        /** @type {?} */
        const shift = this.ACTIONS[action];
        this.position = this.position + shift;
        if (this.events) {
            if (this.position < 0) {
                this.position = this.events.length - 1;
            }
            else if (this.position >= this.events.length) {
                this.position = 0;
            }
            this.item = this.events[this.position];
            this.current = `${(this.position + 1)}/${this.events.length}`;
        }
    }
}
NgxNewstickerAlbeComponent.decorators = [
    { type: Component, args: [{
                // tslint:disable-next-line:component-selector
                selector: 'ngx-newsticker',
                template: "<div #nt class=\"newsticker\">\r\n  <small #ntCounter class=\"nt-counter\" *ngIf=\"showCounter\">{{current}}</small>\r\n  <div #ntTitle class=\"nt-title\">\r\n    <h2>{{title}}</h2>\r\n    <span #nDart></span>\r\n  </div>\r\n  <div class=\"nt-content\">\r\n    <label [innerHTML]=\"item\"></label>\r\n  </div>\r\n  <div class=\"nt-navi\">\r\n    <span (click)=\"navigate('PREV')\">\r\n      <i #ntNavi class=\"arrow-left\"></i>\r\n    </span>\r\n    <span (click)=\"navigate('NEXT')\">\r\n      <i #ntNavi class=\"arrow-right\"></i>\r\n    </span>\r\n  </div>\r\n</div>\r\n",
                styles: [".newsticker{width:100%;height:40px;background-color:#fff;position:relative;border:1px solid #1976d2}.newsticker>.nt-counter{position:absolute;top:-20px;right:-1px;padding:5px;background-color:#1976d2;color:#fff}.newsticker>.nt-title{width:auto;max-width:180px;height:40px;display:inline-block;background-color:#1976d2;position:relative;text-transform:uppercase}.newsticker>.nt-title>h2{display:inline-block;margin:0;padding:0 15px;line-height:40px;font-size:18px;color:#fff;height:40px;box-sizing:border-box;overflow:hidden;font-weight:lighter}.newsticker>.nt-title>span{width:0;position:absolute;right:-10px;top:10px;height:0;border-style:solid;border-width:10px 0 10px 10px;border-color:transparent transparent transparent #1976d2}.newsticker>.nt-content{padding:0;margin:0;position:absolute;top:0;left:200px;right:40px;height:40px;font-size:16px}.newsticker>.nt-content>label{position:absolute;height:40px;width:100%;line-height:40px;text-decoration:none;color:#333;overflow:hidden;display:block;white-space:nowrap;text-overflow:ellipsis;font-weight:400}.newsticker>.nt-navi{width:50px;height:40px;position:absolute;right:0;top:0;opacity:.1}.newsticker>.nt-navi>span{width:25px;height:40px;position:absolute;cursor:pointer}.newsticker>.nt-navi>span:first-child{left:0}.newsticker>.nt-navi>span:last-child{right:0}.newsticker>.nt-navi>span>i{border:solid #1976d2;border-width:0 2px 2px 0;display:inline-block;padding:6px;position:absolute;top:13px;opacity:.5}.newsticker>.nt-navi>span>i.arrow-right{transform:rotate(-45deg);-webkit-transform:rotate(-45deg)}.newsticker>.nt-navi>span>i.arrow-left{transform:rotate(135deg);-webkit-transform:rotate(135deg);left:10px}.newsticker:hover .nt-navi{opacity:1}.newsticker>.nt-content>label,.newsticker>.nt-navi,.newsticker>.nt-navi>span{transition:.25s linear;-moz-transition:.25s linear;-webkit-transition:.25s linear}"]
            }] }
];
/** @nocollapse */
NgxNewstickerAlbeComponent.ctorParameters = () => [
    { type: ElementRef },
    { type: Renderer2 }
];
NgxNewstickerAlbeComponent.propDecorators = {
    title: [{ type: Input }],
    events: [{ type: Input }],
    interval: [{ type: Input }],
    showCounter: [{ type: Input }],
    defaultColor: [{ type: Input }],
    backColor: [{ type: Input }],
    ntRef: [{ type: ViewChild, args: ['nt', { static: true },] }],
    ntCounterRef: [{ type: ViewChild, args: ['ntCounter', { static: true },] }],
    ntTitleRef: [{ type: ViewChild, args: ['ntTitle', { static: true },] }],
    nDart: [{ type: ViewChild, args: ['nDart', { static: true },] }],
    ntNaviRef: [{ type: ViewChildren, args: ['ntNavi',] }],
    onMouseOver: [{ type: HostListener, args: ['mouseover',] }],
    onMouseLeave: [{ type: HostListener, args: ['mouseleave',] }]
};
if (false) {
    /** @type {?} */
    NgxNewstickerAlbeComponent.prototype.title;
    /** @type {?} */
    NgxNewstickerAlbeComponent.prototype.events;
    /** @type {?} */
    NgxNewstickerAlbeComponent.prototype.interval;
    /** @type {?} */
    NgxNewstickerAlbeComponent.prototype.showCounter;
    /** @type {?} */
    NgxNewstickerAlbeComponent.prototype.defaultColor;
    /** @type {?} */
    NgxNewstickerAlbeComponent.prototype.backColor;
    /**
     * @type {?}
     * @private
     */
    NgxNewstickerAlbeComponent.prototype.ntRef;
    /**
     * @type {?}
     * @private
     */
    NgxNewstickerAlbeComponent.prototype.ntCounterRef;
    /**
     * @type {?}
     * @private
     */
    NgxNewstickerAlbeComponent.prototype.ntTitleRef;
    /**
     * @type {?}
     * @private
     */
    NgxNewstickerAlbeComponent.prototype.nDart;
    /** @type {?} */
    NgxNewstickerAlbeComponent.prototype.ntNaviRef;
    /**
     * @type {?}
     * @private
     */
    NgxNewstickerAlbeComponent.prototype.ACTIONS;
    /** @type {?} */
    NgxNewstickerAlbeComponent.prototype.autoNext;
    /** @type {?} */
    NgxNewstickerAlbeComponent.prototype.item;
    /** @type {?} */
    NgxNewstickerAlbeComponent.prototype.current;
    /** @type {?} */
    NgxNewstickerAlbeComponent.prototype.position;
    /**
     * @type {?}
     * @private
     */
    NgxNewstickerAlbeComponent.prototype.elementRef;
    /**
     * @type {?}
     * @private
     */
    NgxNewstickerAlbeComponent.prototype.renderer;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LW5ld3N0aWNrZXItYWxiZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9uZ3gtbmV3c3RpY2tlci1hbGJlLyIsInNvdXJjZXMiOlsibGliL25neC1uZXdzdGlja2VyLWFsYmUuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFDQSxPQUFPLEVBQ0wsU0FBUyxFQUVULEtBQUssRUFDTCxVQUFVLEVBRVYsU0FBUyxFQUNULFNBQVMsRUFDVCxTQUFTLEVBQ1QsWUFBWSxFQUNaLFlBQVksRUFDYixNQUFNLGVBQWUsQ0FBQztBQVF2QixNQUFNLE9BQU8sMEJBQTBCOzs7OztJQThCckMsWUFDVSxVQUFzQixFQUN0QixRQUFtQjtRQURuQixlQUFVLEdBQVYsVUFBVSxDQUFZO1FBQ3RCLGFBQVEsR0FBUixRQUFRLENBQVc7O1FBOUJwQixVQUFLLEdBQUcsRUFBRSxDQUFDOztRQUVYLFdBQU0sR0FBa0IsRUFBRSxDQUFDOztRQUUzQixhQUFRLEdBQUcsSUFBSSxDQUFDOztRQUVoQixnQkFBVyxHQUFHLElBQUksQ0FBQztRQVlwQixZQUFPLEdBQUc7WUFDaEIsTUFBTSxFQUFFLENBQUM7WUFDVCxNQUFNLEVBQUUsQ0FBQyxDQUFDO1NBQ1gsQ0FBQztRQUtGLGFBQVEsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUltQixDQUFDOzs7O0lBRWxDLFFBQVE7UUFDTixJQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7UUFDcEIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLGFBQWE7SUFDdEMsQ0FBQzs7OztJQUVELGVBQWU7UUFDYixJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxZQUFZLElBQUksU0FBUyxDQUFDO1FBRW5ELDhFQUE4RTtRQUM5RSxJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsRUFBRSxrQkFBa0IsRUFBRSxJQUFJLENBQUMsU0FBUyxJQUFJ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QUs7MkJBRUwsS0FBSzt3QkFFTCxLQUFLO29CQUVMLFNBQVMsU0FBQyxJQUFJLEVBQUUsRUFBQyxNQUFNLEVBQUUsSUFBSSxFQUFDOzJCQUM5QixTQUFTLFNBQUMsV0FBVyxFQUFFLEVBQUMsTUFBTSxFQUFFLElBQUksRUFBQzt5QkFDckMsU0FBUyxTQUFDLFNBQVMsRUFBRSxFQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUM7b0JBQ25DLFNBQVMsU0FBQyxPQUFPLEVBQUUsRUFBQyxNQUFNLEVBQUUsSUFBSSxFQUFDO3dCQUNqQyxZQUFZLFNBQUMsUUFBUTswQkEyQ3JCLFlBQVksU0FBQyxXQUFXOzJCQUt4QixZQUFZLFNBQUMsWUFBWTs7OztJQWhFMUIsMkNBQW9COztJQUVwQiw0Q0FBb0M7O0lBRXBDLDhDQUF5Qjs7SUFFekIsaURBQTRCOztJQUU1QixrREFBOEI7O0lBRTlCLCtDQUEyQjs7Ozs7SUFFM0IsMkNBQTJEOzs7OztJQUMzRCxrREFBeUU7Ozs7O0lBQ3pFLGdEQUFxRTs7Ozs7SUFDckUsMkNBQThEOztJQUM5RCwrQ0FBeUQ7Ozs7O0lBRXpELDZDQUdFOztJQUVGLDhDQUFjOztJQUNkLDBDQUFhOztJQUNiLDZDQUFnQjs7SUFDaEIsOENBQWM7Ozs7O0lBR1osZ0RBQThCOzs7OztJQUM5Qiw4Q0FBMkIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xyXG5pbXBvcnQge1xyXG4gIENvbXBvbmVudCxcclxuICBPbkluaXQsXHJcbiAgSW5wdXQsXHJcbiAgRWxlbWVudFJlZixcclxuICBBZnRlclZpZXdJbml0LFxyXG4gIFJlbmRlcmVyMixcclxuICBRdWVyeUxpc3QsXHJcbiAgVmlld0NoaWxkLFxyXG4gIFZpZXdDaGlsZHJlbixcclxuICBIb3N0TGlzdGVuZXJcclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpjb21wb25lbnQtc2VsZWN0b3JcclxuICBzZWxlY3RvcjogJ25neC1uZXdzdGlja2VyJyxcclxuICB0ZW1wbGF0ZVVybDogJy4vbmd4LW5ld3N0aWNrZXItYWxiZS5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4vbmd4LW5ld3N0aWNrZXItYWxiZS5jb21wb25lbnQuc2NzcyddXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBOZ3hOZXdzdGlja2VyQWxiZUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCB7XHJcbiAgLy8gSGlnaGxpZ2h0ZWQgdGV4dC5cclxuICBASW5wdXQoKSB0aXRsZSA9ICcnO1xyXG4gIC8vIExpc3Qgb2YgbWVzc2FnZXMgdG8gYmUgZGlzcGxheWVkLlxyXG4gIEBJbnB1dCgpIGV2ZW50czogQXJyYXk8c3RyaW5nPiA9IFtdO1xyXG4gIC8vIFNldCB0aGUgdGltZSBpbnRlcnZhbCBiZXR3ZWVuIHRoZSB0ZXh0IGV4Y2hhbmdlLlxyXG4gIEBJbnB1dCgpIGludGVydmFsID0gMzAwMDtcclxuICAvLyBTZXRzIHRoZSBjdXJyZW50IGNvdW50IHZpc2liaWxpdHkuXHJcbiAgQElucHV0KCkgc2hvd0NvdW50ZXIgPSB0cnVlO1xyXG4gIC8vIENoYW5nZSB0aGUgZGVmYXVsdCBibHVlIGNvbG9yLlxyXG4gIEBJbnB1dCgpIGRlZmF1bHRDb2xvcjogc3RyaW5nO1xyXG4gIC8vIENoYW5nZSB0aGUgYmFjayBncm91bmQgY29sb3Igb2YgY29udGVudC5cclxuICBASW5wdXQoKSBiYWNrQ29sb3I6IHN0cmluZztcclxuXHJcbiAgQFZpZXdDaGlsZCgnbnQnLCB7c3RhdGljOiB0cnVlfSkgcHJpdmF0ZSBudFJlZjogRWxlbWVudFJlZjtcclxuICBAVmlld0NoaWxkKCdudENvdW50ZXInLCB7c3RhdGljOiB0cnVlfSkgcHJpdmF0ZSBudENvdW50ZXJSZWY6IEVsZW1lbnRSZWY7XHJcbiAgQFZpZXdDaGlsZCgnbnRUaXRsZScsIHtzdGF0aWM6IHRydWV9KSBwcml2YXRlIG50VGl0bGVSZWY6IEVsZW1lbnRSZWY7XHJcbiAgQFZpZXdDaGlsZCgnbkRhcnQnLCB7c3RhdGljOiB0cnVlfSkgcHJpdmF0ZSBuRGFydDogRWxlbWVudFJlZjtcclxuICBAVmlld0NoaWxkcmVuKCdudE5hdmknKSBudE5hdmlSZWY6IFF1ZXJ5TGlzdDxFbGVtZW50UmVmPjtcclxuXHJcbiAgcHJpdmF0ZSBBQ1RJT05TID0ge1xyXG4gICAgJ05FWFQnOiAxLFxyXG4gICAgJ1BSRVYnOiAtMVxyXG4gIH07XHJcblxyXG4gIGF1dG9OZXh0OiBhbnk7XHJcbiAgaXRlbTogc3RyaW5nO1xyXG4gIGN1cnJlbnQ6IHN0cmluZztcclxuICBwb3NpdGlvbiA9IC0xO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgZWxlbWVudFJlZjogRWxlbWVudFJlZixcclxuICAgIHByaXZhdGUgcmVuZGVyZXI6IFJlbmRlcmVyMikgeyB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgdGhpcy5hdXRvTmF2aWdhdGUoKTtcclxuICAgIHRoaXMubmF2aWdhdGUoJ05FWFQnKTsgLy8gaW5pdGlhbGl6ZVxyXG4gIH1cclxuXHJcbiAgbmdBZnRlclZpZXdJbml0KCk6IHZvaWQge1xyXG4gICAgdGhpcy5kZWZhdWx0Q29sb3IgPSB0aGlzLmRlZmF1bHRDb2xvciB8fCAnIzE5NzZEMic7XHJcblxyXG4gICAgLy8gdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gdGhpcy5iYWNrZ3JvdW5kQ29sb3I7XHJcbiAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRoaXMubnRSZWYubmF0aXZlRWxlbWVudCwgJ2JhY2tncm91bmQtY29sb3InLCB0aGlzLmJhY2tDb2xvciB8fCAnI0ZGRkZGRicpO1xyXG4gICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZSh0aGlzLm50UmVmLm5hdGl2ZUVsZW1lbnQsICdib3JkZXItY29sb3InLCB0aGlzLmRlZmF1bHRDb2xvcik7XHJcblxyXG4gICAgaWYgKHRoaXMubnRDb3VudGVyUmVmKSB7XHJcbiAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5udENvdW50ZXJSZWYubmF0aXZlRWxlbWVudCwgJ2JhY2tncm91bmQtY29sb3InLCB0aGlzLmRlZmF1bHRDb2xvcik7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMubnRUaXRsZVJlZikge1xyXG4gICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKHRoaXMubnRUaXRsZVJlZi5uYXRpdmVFbGVtZW50LCAnYmFja2dyb3VuZC1jb2xvcicsIHRoaXMuZGVmYXVsdENvbG9yKTtcclxuICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZSh0aGlzLm5EYXJ0Lm5hdGl2ZUVsZW1lbnQsICdib3JkZXItbGVmdC1jb2xvcicsIHRoaXMuZGVmYXVsdENvbG9yKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLm50TmF2aVJlZi5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKGl0ZW0ubmF0aXZlRWxlbWVudCwgJ2JvcmRlci1jb2xvcicsIHRoaXMuZGVmYXVsdENvbG9yKTtcclxuICAgIH0pO1xyXG5cclxuICB9XHJcblxyXG4gIEBIb3N0TGlzdGVuZXIoJ21vdXNlb3ZlcicpXHJcbiAgb25Nb3VzZU92ZXIoKSB7XHJcbiAgICBjbGVhckludGVydmFsKHRoaXMuYXV0b05leHQpO1xyXG4gIH1cclxuXHJcbiAgQEhvc3RMaXN0ZW5lcignbW91c2VsZWF2ZScpXHJcbiAgb25Nb3VzZUxlYXZlKCkge1xyXG4gICAgdGhpcy5hdXRvTmF2aWdhdGUoKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXV0b05hdmlnYXRlKCkge1xyXG4gICAgaWYgKHRoaXMuaW50ZXJ2YWwgPiAwKSB7XHJcbiAgICAgIHRoaXMuYXV0b05leHQgPSBzZXRJbnRlcnZhbCgoKSA9PiB0aGlzLm5hdmlnYXRlKCdORVhUJyksIHRoaXMuaW50ZXJ2YWwpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmF1dG9OZXh0KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBuYXZpZ2F0ZShhY3Rpb246IHN0cmluZykge1xyXG4gICAgaWYgKHR5cGVvZiB0aGlzLkFDVElPTlNbYWN0aW9uXSA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHNoaWZ0ID0gdGhpcy5BQ1RJT05TW2FjdGlvbl07XHJcbiAgICB0aGlzLnBvc2l0aW9uID0gdGhpcy5wb3NpdGlvbiArIHNoaWZ0O1xyXG5cclxuICAgIGlmICh0aGlzLmV2ZW50cykge1xyXG4gICAgICBpZiAodGhpcy5wb3NpdGlvbiA8IDApIHtcclxuICAgICAgICB0aGlzLnBvc2l0aW9uID0gdGhpcy5ldmVudHMubGVuZ3RoIC0gMTtcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLnBvc2l0aW9uID49IHRoaXMuZXZlbnRzLmxlbmd0aCkge1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSAwO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB0aGlzLml0ZW0gPSB0aGlzLmV2ZW50c1t0aGlzLnBvc2l0aW9uXTtcclxuICAgICAgdGhpcy5jdXJyZW50ID0gYCR7KHRoaXMucG9zaXRpb24gKyAxKX0vJHt0aGlzLmV2ZW50cy5sZW5ndGh9YDtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl19